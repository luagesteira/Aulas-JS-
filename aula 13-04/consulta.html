<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <title>Form com dados</title>
    <script src="./script/classes.js"></script>
    <link rel="stylesheet" href="./style/estilos.css" />
  </head>
  <body onload="load()">
    <table>
      <thead>
          <tr>
              <th>Id</th>
              <th>Nome</th>
              <th>Fone</th>
              <th>Email</th>
              <th>Editar</th>
              <th>Excluir</th>
          </tr>
      </thead>
      <tbody>
          <!--dados carregados dinamicamente -->
      </tbody>
  </table>


    <script>

      function load(){

          let obj = new Contato();
          obj.consultarTodos(myCallback);
      }

      function myCallback(dados){

          let minhaLista = JSON.parse(dados)
          console.log(minhaLista)

          var trs = ""
          for (let indice in minhaLista) {
            trs += `<tr> 
                            <td> ${minhaLista[indice].id}</td>
                            <td> ${minhaLista[indice].nome}</td>
                            <td> ${minhaLista[indice].fone}</td>
                            <td> ${minhaLista[indice].email}</td>
                            <td> <a href='editar.html?id=${minhaLista[indice].id}'>editar</a></td>
                            <td> <a href='excluir.html?id=${minhaLista[indice].id}'>excluir</a></td>

                        </tr>,3

                      `
          }
          document.getElementsByTagName("tbody")[0].innerHTML = trs;
      }

      function apagar(idcontato) {
            let ob = new Contato();
            ob.excluir(idcontato);
            load();
      }
    </script>
  </body>
</html>
